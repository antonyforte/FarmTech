generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  name     String
  cpf      String @id @unique
  email    String @unique
  password String
  farms    Farm[]
}

model Farm {
  id         Int    @id @unique @default(autoincrement())
  proprietar String
  endereco   String
  tamanho    Int
  clima      String
  usercpf    String
  user       User   @relation(fields: [usercpf], references: [cpf])
  culture Culture[]
}

model Culture {
  id Int @id @unique @default(autoincrement())
  local String
  qtd Int
  farmid Int
  farm Farm @relation(fields: [farmid], references: [id], onDelete: Cascade )
  agricultureid Int? @default(-1)
  agriculture    Agriculture? @relation(fields: [agricultureid], references: [tipo], onDelete: SetNull)
}

model Agriculture {
  tipo Int @id @unique @default(autoincrement())
  nome String
  valor_unid Float
  neces_clima String
  colhxanim Boolean
  need Need[]
  culture Culture[] @relation()

}

model Need {
  id Int @id @unique @default(autoincrement())
  agriculturetipo Int
  productId Int
  qtd Int

  agriculture Agriculture @relation(fields: [agriculturetipo], references: [tipo], onDelete: Cascade)
  product Product @relation(fields: [productId], references: [id], onDelete: Cascade)

}

model Product {
  id Int @id @unique @default(autoincrement())
  nome String @unique
  preco Float

  need Need[]


}